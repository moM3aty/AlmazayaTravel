@model AlmazayaTravel.Models.Booking
@{
    ViewData["Title"] = "Booking Confirmation";
}

<header class="page-header-simple bg-light py-4 mb-4">
    <div class="container text-center">
        <h1 data-key="ConfirmTitle" data-en="Booking Confirmation" data-ar="تأكيد الحجز">Booking Confirmation</h1>
        <p class="lead text-muted" data-key="ConfirmSubTitle" data-en="Please review your details before proceeding to payment." data-ar="يرجى مراجعة التفاصيل الخاصة بك قبل المتابعة إلى الدفع.">Please review your details...</p>
    </div>
</header>

<div class="container mb-5">
    @if (Model == null)
    {
        <div class="alert alert-warning" role="alert" data-key="BookingNotFound" data-en="Booking details not found." data-ar="تفاصيل الحجز غير موجودة.">Booking details not found.</div>
    }
    else
    {
        <div class="row justify-content-center">
            <div class="col-lg-7">
                <div class="card shadow-sm rounded-3">
                    <div class="card-header bg-secondary text-white py-3">
                        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i><span data-key="ReviewDetails" data-en="Review Your Details" data-ar="مراجعة التفاصيل">Review Your Details</span></h5>
                    </div>
                    <div class="card-body p-4">
                        <h5 class="mb-3">@Model.TripPackage?.Name</h5>
                        <dl class="row mb-3">
                            <dt class="col-sm-4" data-key="ClientName" data-en="Name" data-ar="الاسم"></dt>
                            <dd class="col-sm-8">@Model.ClientName</dd>
                            <dt class="col-sm-4" data-key="Phone" data-en="Phone" data-ar="الهاتف"></dt>
                            <dd class="col-sm-8">@Model.PhoneNumber</dd>
                            <dt class="col-sm-4" data-key="Email" data-en="Email" data-ar="البريد"></dt>
                            <dd class="col-sm-8">@Model.Email</dd>
                            <dt class="col-sm-4" data-key="Adults" data-en="Adults" data-ar="بالغون"></dt>
                            <dd class="col-sm-8">@Model.Adults</dd>
                            <dt class="col-sm-4" data-key="Children" data-en="Children" data-ar="أطفال"></dt>
                            <dd class="col-sm-8">@Model.Children</dd>
                        </dl>
                        <hr>
                        @{
                            var totalAmount = (Model.TripPackage != null) ? (Model.TripPackage.PriceAfterDiscount ?? Model.TripPackage.PriceBeforeDiscount) * Model.Adults : 0;
                        }
                        <div class="text-end mb-3">
                            <h4 data-key="TotalAmount" data-en="Total Amount" data-ar="المبلغ الإجمالي">Total Amount: <span class="text-primary fw-bold">@totalAmount.ToString("C", System.Globalization.CultureInfo.GetCultureInfo("ar-SA"))</span></h4>
                            <small class="text-muted d-block" data-key="PriceNoteConfirm" data-en="(Subject to final confirmation)" data-ar="(خاضع للتأكيد النهائي)"></small>
                        </div>

                        <form asp-controller="Payment" asp-action="Initiate" method="get">
                            <input type="hidden" name="bookingId" value="@Model.Id" />
                            <input type="hidden" name="amount" value="@totalAmount" />
                            <div class="d-grid">
                                <button type="submit" class="btn btn-success btn-lg rounded-pill shadow">
                                    <i class="fas fa-credit-card me-2"></i> <span data-key="ProceedToPayment" data-en="Confirm & Proceed to Payment" data-ar="تأكيد والمتابعة للدفع">Confirm & Proceed to Payment</span>
                                </button>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    }
</div>

@section Scripts {
}
